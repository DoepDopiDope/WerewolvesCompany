using BepInEx.Logging;
using UnityEngine;
using WerewolvesCompany.Managers;

namespace WerewolvesCompany.UI
{
    public class HUDInitializer : MonoBehaviour
    {
        public static HUDInitializer Instance;

        public ManualLogSource logger = Plugin.Instance.logger;
        public ManualLogSource logdebug = Plugin.Instance.logdebug;
        
        void Awake()
        {
            if (Instance == null)
            {
                Instance = this;
                DontDestroyOnLoad(gameObject); // Keep it across scenes if needed
            }
            else
            {
                logger.LogInfo("Duplicate detected, delted the just-created RoleInitializer");
                Destroy(gameObject); // Prevent duplicate instances
            }

            logger.LogInfo("Manually Starting the HUDInitializer");
            Start();
        }


        void Start()
        {
            // Add the RoleHUD to the scene
            logger.LogInfo("Starting the HUDInitializer");
            GameObject roleHUDObject = new GameObject("RoleHUD");
            RoleHUD roleHUD = roleHUDObject.AddComponent<RoleHUD>();
            logger.LogInfo($"HUDInitializer has create the roleHUDObject");

            logdebug.LogInfo("roleHUDObject has the following properties:");
            logdebug.LogInfo($"-- roleHUDObject.activeSelf = {roleHUDObject.activeSelf}");
        }


        void OnDestroy()
        {
            logger.LogError($"{name} has been destroyed!");
        }
    }
}
